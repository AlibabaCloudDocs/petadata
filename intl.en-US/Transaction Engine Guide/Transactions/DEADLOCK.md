# DEADLOCK {#concept_fyz_bqk_x2b .concept}

-   When transactions are in deadlock, HybridDB for MySQL allows the operation for only one transaction, removes the deadlock of the other transactions, and rolls back the deadlocked transactions.

-   If an UPDATE statement in a transaction applies to only one partition, but the deadlocked rows exist in two partitions, HybridDB for MySQL cannot immediately detect the deadlock. The UPDATE statements in the deadlocked transactions then request locks. If a lock wait timeout occurs, HybridDB for MySQL reports an UPDATE error. However, this error cannot cause transaction rollbacks in related partitions, so these partitions continue to process the transactions normally. Afterward, HybridDB for MySQL reports the lock wait timeout error.

-   If an UPDATE statement in a transaction applies to only one partition, and the deadlocked rows exist in only that partition, HybridDB for MySQL immediately detects the deadlock. HybridDB for MySQL then allows the operation for only one of the deadlocked UPDATE transactions, and rolls back the other deadlocked transactions immediately. UPDATE statements in transactions may occur in multiple partitions. Therefore, HybridDB for MySQL locks all rows for the transactions that have not passed the MySQL deadlock detection. HybridDB for MySQL also removes the deadlock of these transactions, and you can only roll back these transactions. HybridDB for MySQL continues to normally process the transaction that has passed the MySQL deadlock detection. HybridDB for MySQL also reports the deadlock error. Transactions that are not rolled back will cause a rollback error.

-   If an UPDATE statement in a transaction applies to multiple partitions, but the deadlocked rows exist in two partitions, HybridDB for MySQL cannot immediately detect the deadlock. The UPDATE statements in the deadlocked transactions then request locks. When a lock wait timeout occurs, HybridDB for MySQL reports an UPDATE error. However, this error cannot cause transaction rollbacks in related partitions, so these partitions continue to process the transactions normally. Afterward, HybridDB for MySQL reports an inconsistent data error.

-   If an UPDATE statement in a transaction applies to multiple partitions, but the deadlocked rows exist in one partition, HybridDB for MySQL immediately detects the deadlock. HybridDB for MySQL then allows the operation for only one of the deadlocked UPDATE transactions, and rolls back the other deadlocked transactions immediately. UPDATE transactions may occur in multiple partitions. Therefore, HybridDB for MySQL locks all rows for the transactions that have not passed the MySQL deadlock detection. HybridDB for MySQL also removes the deadlock of these transactions, and you can only roll back these transactions. HybridDB for MySQL continues to normally process the transaction that has passed the MySQL deadlock detection. HybridDB for MySQL also reports the inconsistent data error. Transactions that are not rolled back will cause a rollback error.


